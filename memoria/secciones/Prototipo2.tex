\chapter{Prototipo 2º}
En este segundo prototipo se han incoporado cambios breves pero realistas que aportan un mayor nivel de autenticidad a la simulación. Además, se ha desarrollado un Dashboard que permite visualizar de forma clara el registro completo de eventos, funcionando como un panel de control similar al de una torre de control.

\section{Dashboard Aeroportuario}
Se ha diseñado un dashboard simple, pero lleno de información valiosa que permite ver como funciona el sistema aeroportuario a tiempo real, y, que muestra datos coherentes.

El dashboard está compuesto por un panel con varias opciones. En primer lugar, incluye un modo automático donde las vistas, tanto operativa como táctica, se alternan según un tiempo determinado. Por otro lado, están las ventanas de vista táctica y operativa que el usuario puede cambiar manualmente cuando lo desee. Además, se incluyen botones de \textit{play}, \textit{pausa} y \textit{stop}, y es posible ajustar la velocidad de la simulación para visualizarla más rápido en tiempo real.

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.6\textwidth]{portada/CentroControl.png}
    \caption{Centro de Cotrol Dashboard}
    \label{fig:Centro de Cotrol Dashboard}
\end{figure}

Al realizar la simulación, como se mencionó anteriormente, se pueden observar dos vistas principales.
\\
\\
La vista operativa muestra las colas de llegadas y salidas de las aeronaves, mientras que la otra vista indica la ocupación del parking. Cuando estas colas alcanazan un número elevado de aeronaves ($\ge 8$) o hay muchas aeronaves estacionadas ($\ge 45$), se genera una alerta que se muestra directamente en el programa. Además, en la parte inferior se pueden ver las últimas aeronaves que están aterrizando, estacionadas o despegando.

\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{portada/VistaOperativa.png}
    \caption{Vista Operativa Dashboard}
    \label{fig:Vista Operativa Dashboard}
\end{figure}

La vista táctica muestra información sobre el número de pasajeros que llega al aeropuerto y cuantos de ellos se están atendiendo. Además, presenta el clima actual, el estado de la simulación y un gráfico que refleja la cantidad de aeronaves en la cola de llegadas y salidas.

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.8\textwidth]{portada/VistaTactica.png}
    \caption{Vista Táctica Dashboard}
    \label{fig:Vista Táctica Dashboard}
\end{figure}

Además, el dashboard incorpora un sistema de estados de alerta que se muestra tanto en la vista táctica como en la operativa. Cuando la cola de llegadas supera las 8 aeronaves o la ocupación del parking excede los 45 puestos, se activa una alerta crítica. Esta señalización indica que el sistema aeroportuario está alcanzado niveles de saturación, y que, por tanto, es un momento clave en el que deberían activarse medidas para mejorar la situación. A continuación, se presenta una imagen que ilustra cómo se visualiza esta alerta en la interfaz:
\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{portada/AlertaCritica.png}
    \caption{Alerta Crítica Dashboard}
    \label{fig:Alerta Crítica Dashboard}
\end{figure}

Asimismo en la interfaz se pueden identificar los vuelos de emergencia, los cuales aparecen resaltados en color rojo. Estos casos se producen, por ejemplo, cuando una aeronave tiene el nivel de combustible bajo o necesita aterrizar con urgencia por cualquier otro motivo operativo. Debido a esta prioridad, dichos vuelos se incoporan directamente al proceso de aterrizaje, adelantándose al resto de la cola para garantizar su llegada inmediata:
\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{portada/Emergencia.png}
    \caption{Vuelo de Emergencia Dashboard}
    \label{fig:Vuelo de Emergencia Dashboard}
\end{figure}

\section{Evolución de la Lógica de la Simulación}
A partir del prototipo anterior, que ya presentaba un nivel de desarrollo para aumentar el realismo de la simulación. En esta nueva versión se han implementado elementos adicionales del sistema aeroportuario, como el cierre temporal de pistas, los diferentes tipos de parking y otras características operativas. Todo ello contribuye a que la simulación represente de forma más fiel el comportamiento real de un aeropuerto. 

\subsection{Gestión de Pistas}
Además de actuar como servidores en los que se gestionan las operaciones de aterrizaje y despegue, las pistas pueden presentar problemas que deben ser resueltas para evitar problemas y riesgos en las operaciones aéreas.
\\
\\
Por ello, se ha incluido un proceso que contempla el cierre temporal de una pista cuando pasa un cierto tiempo. Durante este período la pista permanece inactiva hasta que el equipo correspondiente completa la intervención en el tiempo establecido.
\\
\\
También se ha incluido un manejo de excepciones para aeronaves en estado de emergencia. Cuando se detecta un vuelo en estado de emergencia, se asume que presenta algún tipo de problema que requiere atención inmediata. Por ello, se le otorga prioridad absoluta en la cola de llegadas, permitiéndolo aterrizar antes que el resto de aeronaves. Esta situación se puede visualizar en el dashboard, tal y como se muestra en la figura \ref{fig:Vuelo de Emergencia Dashboard}.
\subsection{Asignación de Estacionamientos}
Cuando el aeropuerto se queda sin posiciones de contacto disponibles, las aeronaves deben ubicarse en posiciones remotas, donde un autobús translada a los pasasjeros hasta la terminal. Esto ocurre cuando la demanda supera la capacidad disponible de posiciones de contacto.
\\
\\
Para reflejar esto en la simulación, se ha implementado un mecanismo el cual, cuando la cola del parking principal alcanza su límite, las aeronaves que van llegando a continuación se desvían automáticamente al parking secundario, que cuenta con una capacidad máxima de 10 posiciones. De esta manera el aeropuerto mantiene una mayor agilidad operativa y evita posibles saturaciones.
\subsection{Procesamiento de Procesos en Paralelo}
Una vez la aeronave esta estacionada, se llevan a cabo diversos procesos necearios para prepararlos para el siguiente vuelo. 
\\
\\
En la simulación se han incluido los servicios de limpieza, catering y repostaje de combustible, los cuales se ejecutan de forma paralela. También se considera el tiempo correspondiente al embarque de los pasajeros. La duración total de estos procesos influye en la puntualidad, ya que, si uno de ellos se retrasa, el tiempo de salida del vuelo puede verse afectado, generando demoras en el sistema.
\section{Análisis de los Datos de la Simulación}
Para esta fase se ha mantenido la misma matriz de escenarios utilizada en la iteración anterior. Esta elección permite que podamos realizar una comparación directa entre ambas versiones y evaluar de manera más precisa las mejoras que han sido introducidas al simulador en este prototipo.
\\
\\
Sin embargo, ya que hemos incorporado nuevos atributos, como el cierre y apertura de pistas, es previsible que los resultados obtenidos difieran notablemente respecto al primer prototipo. Por ello, tomamos en cuenta diferentes parámetros para los escenarios:
\begin{table}[H]
    \centering
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|c|c|c|c|} 
        \hline
        Parámetros & Escenario Base & Escenario de Estrés & Escenario Adverso\\
        \hline
        Mes &  Julio & Julio & Enero\\
        Clima & Soleado & Soleado & Nublado/Lluvioso\\
        \textbf{Disponibilidad Pistas} & Dinámico & Dinámico & Dinámico \\
        Tasa Tráfico & 200 operaciones & 400 operaciones & 300 operaciones\\
        \textbf{Gestión Parking} & Mixta & Mixta & Mixta\\
        Horas Simuladas & 24h & 24h & 24h\\
        \textbf{Incidencias} & Activas & Activas & Activas\\
        Turno Comienzo & Madrugada & Madrugada & Madrugada\\
        \textbf{Iteraciones} & 75 & 75 & 75\\
        \hline
    \end{tabular}
    \caption{Parámetros Actualizados Prototipo 2}
    \label{tab:Parámetros Actualizados Prototipo 2}
\end{table}
Como se muestra en la tabla \ref{tab:Parámetros Actualizados Prototipo 2}, los parámetros de simulación se mantienen prácticamente iguales a los del prototipo anterior,  con la excepcion de tres nuevos factores que ahora permanecen constantes en los tres escenarios. A continuacion, se describe la lógica asociada a cada uno de ellos:
\begin{itemize}
    \item Disponibilidad de Pistas (Dinámica): El sistema incorpora la posibilidad de que las pistas se cierren temporalmente para labores de mantenimiento u otros procedimientos, volviendose a abrir una vez finalizados.
    \item Gestion de Parking (Mixta): Ahora, el modelo tiene dos tipos de estacionamiento: posiciones de contacto, que permiten una operación más rápida, y posiciones remotas, que requieren el uso de autobus para el traslado de pasajeros. Cuando no quedan gates disponibles, las aeronaves se asignan a posiciones remotas.
    \item Incidencias (Activas): También, se incorpora la presencia de vuelos con estado de emergencia. Estas aeronves reciben prioridad absoluta en la cola de llegadas, lo que les permite adelantar al resto de aeronaves.
\end{itemize}

\section{Resultados de la Experimentación del Prototipo}
A continuacion se muestran los resultados obtenidos con el segundo prototipo. Igual que en el apartado del primer prototipo, el objetivo es comparar cómo se comportan los distintos escenarios y comentar lo que se observa en las gráficas. Esto permite ver que ha cambiado con las nuevas funcionalidades y cómo afectan al sistema aeroportuario.
\\
\\
Para empezar, vamos a ver cómo evoluciona la cola de llegadas tras la incorporación de las nuevas funcionalidades, para ello miraremos la cola de llegada en condiciones normales:
\\
\\
\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{portada/EvolucionColaAterrizaje.png}
    \caption{Evolución de la Cola de Aterrizaje}
    \label{Evolución de la Cola de Aterrizaje}
\end{figure}
\\
Se observa que la cola se aerca a su límite justo cuando se cierra la pista por mantenimiento. Esto coincide además con una franja horaria en la que llegan más vuelos, por lo que el cierre provoca que la cola se llene más rápido.
\\
\\
Para continuar, vamos a seguir con el numero total de operaciones aéreas por turno, para ver la cantidad que hay en cada turno y los posibles cuellos de botella:
\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{portada/TotalPorTurnoJulio2.png}
    \caption{Ops. Aereas por Turno Escenario Base PR2}
    \label{Ops. Aereas por Turno Escenario Base PR2}
\end{figure}
\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{portada/TotalPorTurnoAtasco2.png}
    \caption{Ops. Aereas por Turno Escenario de Estrés PR2}
    \label{Ops. Aereas por Turno Escenario de Estrés PR2}
\end{figure}
\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{portada/TotalPorTurnoEnero2.png}
    \caption{Ops. Aereas por Turno Escenario Adverso PR2}
    \label{Ops. Aereas por Turno Escenario Adverso PR2}
\end{figure}
\\
\\
Después de ver los tres gráficos se puede observar que al igual que en el primer prototipo, los turnos de madrugada y noche son los de menor tráfico. El Escenario Adverso \ref{Ops. Aereas por Turno Escenario Adverso PR2} actúa como un escalón intermedio, ya que eleva las operaciones moderadamente respecto al Escenario Base \ref{Ops. Aereas por Turno Escenario Base PR2}. En cambio, el Escenario de Estrés \ref{Ops. Aereas por Turno Escenario de Estrés PR2} es drástico, ya que duplica el tráfico de madrugada y hace que el turno de noche supere al pico máximo de una tarde en el Base.
\\
\\
En los turnos críticos de mañana y tarde,  en el Escenario Adverso  se aumentan tanto la carga como la dispersión de datos de sus operaciones. Por su parte, en el Escenario de Estrés el número de operaciones aéreas se dispara, duplicando en la tarde las operaciones del Escenario Base.
\\
\\
Para analizar cómo responde el sistema ante una acumulación alta de operaciones aéreas, en este prototipo se utilizan gráficos tipo \textit{heatmap}. Aunque en el primer prototipo ya se representaban relaciones similares mediante gráficas de regresión lineal, el heatmap ofrece una visualización distinta y más intuitiva. En concreto, al igual que en el primer prototipo, permite ver simultáneamente el número de operaciones y el tiempo medio de ciclo de cada aeronave, destacando de forma más clara las zonas donde el sistema alcanza sus puntos críticos en cada escenario.
\begin{figure}[h!]
    \centering
    \includegraphics[width=0.7\textwidth]{portada/HexbinJulio.png}
    \caption{Heatmap Escenario Base}
    \label{Heatmap Escenario Base}
\end{figure}
\begin{figure}[h!]
    \centering
    \includegraphics[width=0.7\textwidth]{portada/HexbinAtasco.png}
    \caption{Heatmap Escenario de Estrés}
    \label{Heatmap Escenario de Estrés}
\end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.7\textwidth]{portada/HexbinEnero.png}
    \caption{Heatmap Escenario Adverso}
    \label{Heatmap Escenario Adverso}
\end{figure}

Comparando los tres escenarios, se observa que el Escenario Base \ref{Heatmap Escenario Base} funciona de forma estable y bastante predecible. En su gráfico se muestra una diagonal clara y ascendente, lo que indica una correlación lineal, ya que el tiempo de ciclo aumenta proporcionalmente al tráfico, esto mantiene una disperisón baja y controlada.
\\
\\
En cambio, en el Escenario Adverso \ref{Heatmap Escenario Adverso} se rompe esa estabilidad. La distribución se desplaza mucho más hacia tiempos mayores(160 minutos) y los datos comienzan a dispersarse. Esto refleja que, ante un aumento de carga, el sistema ofrece mayor resistencia pero pierde eficiencia, costándole más procesar el flujo de aeronaves.
\\
\\
En el Escenario de Estrés \ref{Heatmap Escenario de Estrés}, el comportamiento cambia por completo y se vuelve crítico. Ya que, a diferencia de la estabilidad anterior, la zona de densidad se expande formando una mancha masiva e irregular. Esto muestra un sistema en saturación inestable, con cargas extrema de 600 a 700 operaciones y con tiempos que se disparan a pico de 170 minutos con una variabiliad enorme, poniendo en evidencia que hay una perdida de control sobre la predicitibilidad del sistema.
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{portada/PasajerosIters.png}
    \caption{Heatmap Escenario Adverso}
    \label{Heatmap Escenario Adverso}
\end{figure}